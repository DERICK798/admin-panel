
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Admin Login</title>
<style>
body { font-family: Arial; background: #f5f5f5; }
main { display: flex; justify-content: center; align-items: center; height: 100vh; }
.card { background: #fff; padding: 30px; border-radius: 10px; box-shadow: 0 0 10px rgba(0,0,0,0.1); width: 300px; }
input { width: 100%; padding: 8px; margin: 5px 0 15px; border-radius: 5px; border: 1px solid #ccc; }
button { width: 100%; padding: 10px; border: none; border-radius: 5px; background: #007bff; color: #fff; font-size: 16px; cursor: pointer; }
button:hover { background: #0056b3; }
.error { color: red; font-size: 14px; }
.small { font-size: 12px; }
</style>
</head>
<body>
<main class="page">
<section class="card">
<h1>Sign in to Admin</h1>

<form id="loginForm">
    <label for="email">Email</label>
    <input id="email" name="email" type="email" required>

    <label for="password">Password</label>
    <input id="password" name="password" type="password" required>

    <div class="inline-row">
        <label class="small"><input id="show-password" type="checkbox"> Show password</label>
    </div>

    <p class="error" id="errorMsg"></p>

    <button type="submit">Sign in</button>
</form>
<p class="muted" style="text-align:center; margin-top:15px;">@2025 All rights reserved. Admins only.</p>
</section>
</main>

<script>
document.getElementById('show-password').addEventListener('change', function() {
    const pwd = document.getElementById('password');
    pwd.type = this.checked ? 'text' : 'password';
});

// Handle login submission
document.getElementById('loginForm').addEventListener('submit', async function(e) {
    e.preventDefault();

    const email = document.getElementById('email').value;
    const password = document.getElementById('password').value;
    const errormsg = document.getElementById('errorMsg');
    errormsg.innerText = '';

    try {
        const res = await fetch('/api/admin/login', {  // âœ… Updated route
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify({ email, password })
});

        const data = await res.json();
if (res.ok) {
    localStorage.setItem('token', data.token);  // SAVE JWT
        // optional
    window.location.href = 'dashboard.html';
} else {
    const data = await res.json();
    errormsg.innerText = data.error || 'Login failed';
}

    } catch(error) {
        errormsg.innerText = 'An error occurred. Please try again.';
    }
});
</script>
